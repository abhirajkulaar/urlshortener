(this["webpackJsonpfile-share"]=this["webpackJsonpfile-share"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(21),i=n.n(s),o=(n(29),n.p,n(30),n(3)),l=n.n(o),d=n(9),u=n(8);function j(e){document.querySelector(".alert-danger").classList.remove("d-none"),document.querySelector(".alert-danger").innerText=e,setTimeout((function(){return document.querySelector(".alert").classList.add("d-none")}),1500)}function b(e){document.querySelector(".alert-success").classList.remove("d-none"),document.querySelector(".alert-success").innerText=e,setTimeout((function(){return document.querySelector(".alert-success").classList.add("d-none")}),1500)}function h(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{class:"alert alert-success d-none",role:"alert",style:{zIndex:1031},children:"This is a danger alert\u2014check it out!"}),Object(r.jsx)("div",{class:"alert alert-danger d-none",role:"alert",style:{zIndex:1032},children:"This is a danger alert\u2014check it out!"})]})}var x=function(){function e(){return(e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={usermail:a,password:b},document.getElementById("spinner").classList.remove("d-none"),e.next=5,fetch("login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:if(r=e.sent,document.getElementById("spinner").classList.add("d-none"),200!=r.status){e.next=23;break}return e.next=10,r.json();case 10:c=e.sent,e.t0=c.userType,e.next="admin"===e.t0?14:"manager"===e.t0?16:"employee"===e.t0?18:21;break;case 14:return window.location.href="/landingadmin",e.abrupt("break",21);case 16:return window.location.href="/landingmanager",e.abrupt("break",21);case 18:return window.location.href="/landingemployee",e.abrupt("break",21);case 21:e.next=27;break;case 23:return e.next=25,r.json();case 25:j(e.sent.reason);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),b=o[0],h=o[1];return Object(r.jsx)("div",{class:"container",children:Object(r.jsxs)("form",{id:"loginForm",class:"border border-light p-5",onSubmit:function(t){return e.apply(this,arguments)},children:[Object(r.jsx)("p",{class:"h4 mb-4 text-center",children:"Sign in"}),Object(r.jsx)("input",{type:"email",name:"usermail",class:"form-control mb-4",placeholder:"E-mail",value:a,onInput:function(e){return s(e.target.value)}}),Object(r.jsx)("input",{type:"password",name:"password",class:"form-control mb-4",placeholder:"Password",value:b,onInput:function(e){return h(e.target.value)}}),Object(r.jsxs)("div",{class:"d-flex justify-content-between",children:["s",Object(r.jsx)("div",{children:Object(r.jsx)("a",{href:"/forgotPass",children:"Forgot password?"})})]}),Object(r.jsxs)("button",{class:"btn btn-info btn-block my-4",type:"submit",children:["Sign in",Object(r.jsx)("span",{id:"spinner",class:"spinner-border spinner-border-sm ml-2 d-none",role:"status","aria-hidden":"true"})]}),Object(r.jsx)("div",{class:"text-center",children:Object(r.jsxs)("p",{children:["Not a member?",Object(r.jsx)("a",{href:"/register",children:"Register"})]})})]})})};var p=function(e){return Object(r.jsxs)("nav",{class:"navbar fixed-top navbar-expand-md navbar-dark bg-primary mb-3",children:[Object(r.jsxs)("div",{class:"flex-row d-flex",children:[Object(r.jsx)("button",{type:"button",class:"navbar-toggler mr-2 ","data-toggle":"offcanvas",title:"Toggle responsive left sidebar",children:Object(r.jsx)("span",{class:"navbar-toggler-icon"})}),Object(r.jsx)("a",{class:"navbar-brand",href:"#",title:"Free Bootstrap 4 Admin Template",children:"Ticket Booking"})]}),Object(r.jsxs)("div",{class:"navbar-collapse collapse",id:"collapsingNavbar",children:[Object(r.jsx)("ul",{class:"navbar-nav",children:Object(r.jsx)("li",{class:"nav-item active",children:Object(r.jsxs)("a",{class:"nav-link",href:"#",children:["Welcome ",e.usermail]})})}),Object(r.jsx)("ul",{class:"navbar-nav ml-auto",children:Object(r.jsx)("li",{class:"nav-item",children:Object(r.jsx)("a",{class:"nav-link",href:"/logout",children:"Logout"})})})]})]})},O=n(11),f=n(7);var v=function(e){return Object(c.useEffect)((function(){return console.log("member mounted")}),[]),Object(r.jsxs)("div",{class:"row",children:[Object(r.jsx)("div",{class:"col-3",children:Object(r.jsxs)("div",{class:"form-group",children:[Object(r.jsx)("label",{for:"",children:"Name"}),Object(r.jsx)("input",{type:"text",class:"form-control",value:e.name,name:"",id:"name","aria-describedby":"helpId",placeholder:"",onChange:function(t){return e.setMembers((function(n){var r=Object(O.a)(n);return r[e.index].name=t.target.value,r}))},required:!0})]})}),Object(r.jsxs)("div",{class:"col-2",children:[Object(r.jsx)("label",{for:"",children:"Gender"}),Object(r.jsxs)("select",{class:"form-control",name:"zone",id:"",value:e.gender,onChange:function(t){return e.setMembers((function(n){var r=Object(O.a)(n);return r[e.index].gender=t.target.value,r}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select Gender"}),Object(r.jsx)("option",{value:"Male",children:"Male"}),Object(r.jsx)("option",{value:"Female",children:"Female"})]})]}),Object(r.jsxs)("div",{class:"col-2",children:[Object(r.jsx)("label",{for:"",children:"Nationality"}),Object(r.jsxs)("select",{class:"form-control",name:"zone",id:"",value:e.nationality,onChange:function(t){return e.setMembers((function(n){var r=Object(O.a)(n);return r[e.index].nationality=t.target.value,r}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select Nation"}),Object(r.jsx)("option",{value:"Indian",children:"Indian"}),Object(r.jsx)("option",{value:"Foreigner",children:"Foreigner"})]})]}),Object(r.jsxs)("div",{class:"col-2",children:[Object(r.jsx)("label",{for:"",children:"ID Type"}),Object(r.jsxs)("select",{class:"form-control",name:"zone",id:"",value:e.idType,onChange:function(t){return e.setMembers((function(n){var r=Object(O.a)(n);return r[e.index].idType=t.target.value,r}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select IdType"}),Object(r.jsx)("option",{value:"Passport",children:"Passport"}),Object(r.jsx)("option",{value:"Aadhar",children:"Aadhar"}),Object(r.jsx)("option",{value:"Driving Licence",children:"Driving Licence"}),Object(r.jsx)("option",{value:"Voter ID",children:"Voter ID"}),Object(r.jsx)("option",{value:"PAN Card",children:"PAN Card"}),Object(r.jsx)("option",{value:"Office ID",children:"Office ID"}),Object(r.jsx)("option",{value:"Student ID",children:"Student ID"})]})]}),Object(r.jsxs)("div",{class:"col-3",children:[Object(r.jsxs)("div",{class:"form-group",children:[Object(r.jsx)("label",{for:"",children:"ID No"}),Object(r.jsx)("input",{type:"text",class:"form-control",name:"",value:e.idNo,id:"IdNo","aria-describedby":"helpId",placeholder:"",onChange:function(t){return e.setMembers((function(n){var r=Object(O.a)(n);return r[e.index].idNo=t.target.value,r}))},required:!0})]}),Object(r.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){return e.setMembers((function(t){var n=Object(O.a)(t);return n.splice(e.index,1),n}))},children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})]})};var m=function(e){var t=window.$,n=Object(c.useState)({title:"",zone:"",shift:"",date:"",vehicle:""}),a=Object(d.a)(n,2),s=a[0],i=a[1];window.addTicketForm=s;var o=Object(c.useState)([]),h=Object(d.a)(o,2),x=h[0],p=h[1];function m(){return(m=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/createTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(f.a)(Object(f.a)({},s),{},{members:x}))});case 3:if(200!=(r=t.sent).status){t.next=12;break}b("Store Successfully Created"),e.setshow("none"),i({title:"",zone:"",shift:"",date:"",vehicle:""}),p([]),t.next=16;break;case 12:return t.next=14,r.json();case 14:j(t.sent.reson);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return window.members=x,Object(c.useEffect)((function(){t("#datepicker").datepicker({uiLibrary:"bootstrap4",format:"dd/mm/yy"}),t("#datepicker").change((function(e){console.log(e),i((function(t){return Object(f.a)(Object(f.a)({},t),{},{date:e.target.value})}))}))}),[]),Object(r.jsx)("div",{class:"modal",id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{display:e.show},children:Object(r.jsx)("div",{class:"modal-dialog modal-xl",role:"document",children:Object(r.jsxs)("div",{class:"modal-content",children:[Object(r.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){e.setshow("none"),i({title:"",zone:"",shift:"",date:"",vehicle:""}),p([])},children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(r.jsx)("div",{class:"col-12",children:Object(r.jsxs)("div",{class:"form-group",children:[Object(r.jsx)("label",{for:"",children:"Ticket Title"}),Object(r.jsx)("input",{type:"text",class:"form-control",value:s.title,name:"",id:"name","aria-describedby":"helpId",placeholder:"",onChange:function(e){return i((function(t){return Object(f.a)(Object(f.a)({},t),{},{title:e.target.value})}))},required:!0})]})}),Object(r.jsxs)("form",{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(r.jsxs)("div",{class:"row",children:[Object(r.jsx)("div",{class:"col col-6 form-group",children:Object(r.jsxs)("div",{class:"form-group",children:[Object(r.jsx)("label",{for:"",children:"Zone"}),Object(r.jsxs)("select",{class:"form-control",name:"zone",id:"",value:s.zone,onChange:function(e){return i((function(t){return Object(f.a)(Object(f.a)({},t),{},{zone:e.target.value})}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select Zone"}),Object(r.jsx)("option",{value:"Zone 1",children:"Zone 1"}),Object(r.jsx)("option",{value:"Zone 2",children:"Zone 2"}),Object(r.jsx)("option",{value:"Zone 3",children:"Zone 3"}),Object(r.jsx)("option",{value:"Zone 4",children:"Zone 4"}),Object(r.jsx)("option",{value:"Zone 5",children:"Zone 5"}),Object(r.jsx)("option",{value:"Zone 6",children:"Zone 6"}),Object(r.jsx)("option",{value:"Zone 7",children:"Zone 7"}),Object(r.jsx)("option",{value:"Zone 8",children:"Zone 8"}),Object(r.jsx)("option",{value:"Zone 9",children:"Zone 9"}),Object(r.jsx)("option",{value:"Zone 10",children:"Zone 10"})]})]})}),Object(r.jsxs)("div",{class:"col col-6 form-group",children:[Object(r.jsx)("label",{for:"",children:"Shift"}),Object(r.jsxs)("select",{class:"form-control",name:"zone",id:"",value:s.shift,onChange:function(e){return i((function(t){return Object(f.a)(Object(f.a)({},t),{},{shift:e.target.value})}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select Shift"}),Object(r.jsx)("option",{value:"Morning",children:"Morning"}),Object(r.jsx)("option",{value:"Evening",children:"Evening"})]})]}),Object(r.jsx)("div",{class:"col-6",children:Object(r.jsx)("input",{id:"datepicker",width:"276",value:s.date,required:!0})}),Object(r.jsxs)("div",{class:"col-6 form-group",children:[Object(r.jsx)("label",{for:"",children:"Vehicle"}),Object(r.jsxs)("select",{class:"form-control",name:"vehicle",id:"",value:s.vehicle,onChange:function(e){return i((function(t){return Object(f.a)(Object(f.a)({},t),{},{vehicle:e.target.value})}))},required:!0,children:[Object(r.jsx)("option",{value:"",disabled:!0,children:"Select Vehicle"}),Object(r.jsx)("option",{value:"Morning",children:"Gypsy"}),Object(r.jsx)("option",{value:"Evening",children:"Canter"})]})]})]}),x.map((function(e,t){return Object(r.jsx)(v,{setMembers:p,index:t,name:e.name,gender:e.gender,nationality:e.nationality,idType:e.idType,idNo:e.idNo})})),Object(r.jsx)("input",{type:"button",value:"Add Member",onClick:function(){return p((function(e){return[].concat(Object(O.a)(e),[{name:"",gender:"",nationality:"",idType:"",idNo:""}])}))},required:!0}),Object(r.jsx)("button",{type:"submit ",class:"btn btn-primary d-block",children:"Submit"})]})]})})})};var g=function(e){var t=e.index,n=e.setTickets;function c(){return(c=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/triggerPayment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})});case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(u.a)(l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("/removeTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})});case 2:200==r.sent.status?(b("Ticket Removed Successfully"),n((function(e){var n=Object(O.a)(e);return n.splice(t,1),n}))):j("Unable to delete ticket");case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return e=e.details,console.log(e),Object(r.jsxs)("div",{class:"card m-4",style:{width:"20rem"},children:[Object(r.jsx)("button",{onClick:function(){return a.apply(this,arguments)},children:Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16",children:[Object(r.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(r.jsx)("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})}),Object(r.jsxs)("div",{class:"card-body text-center",children:[Object(r.jsx)("h5",{class:"card-title text-center",children:e.title}),Object(r.jsx)("p",{class:"card-text",children:e.members.map((function(e){return e.name})).join(",")}),Object(r.jsx)("p",{class:"card-text",children:e.date}),Object(r.jsx)("p",{class:"card-text",children:e.zone}),Object(r.jsx)("p",{class:"card-text",children:e.shift}),Object(r.jsx)("button",{type:"button",class:"btn m-1 "+function(){switch(e.status){case"Not Started":return"btn-info";case"Running":return"btn-warning";case"Failed":return"btn-danger";default:return"btn-success"}}(),disabled:!0,children:e.status}),Object(r.jsx)("button",{type:"button",class:"btn btn-primary m-1",disabled:"Awaiting Payment"!=e.status,onClick:function(){return c.apply(this,arguments)},children:"Start Payment"})]})]})};var y=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1];return window.tickets=n,Object(c.useEffect)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/tickets");case 2:if(200==(t=e.sent).status){e.next=10;break}return e.t0=j,e.next=7,t.json().reason;case 7:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 10:return e.t2=a,e.next=13,t.json();case 13:e.t3=e.sent,(0,e.t2)(e.t3),setInterval(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/tickets");case 2:if(200==(t=e.sent).status){e.next=10;break}return e.t0=j,e.next=7,t.json().reason;case 7:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 10:return e.t2=a,e.next=13,t.json();case 13:e.t3=e.sent,(0,e.t2)(e.t3);case 15:case"end":return e.stop()}}),e)}))),2e3);case 16:case"end":return e.stop()}}),e)}))),[]),Object(r.jsx)("div",{class:"row",children:n.map((function(e,t){return Object(r.jsx)(g,{index:t,setTickets:a,details:e})}))})};var w=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),i=Object(d.a)(s,2),o=(i[0],i[1],Object(c.useState)("none")),j=Object(d.a)(o,2),b=j[0],h=j[1];return Object(c.useEffect)(Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/userDetails");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),a(n.usermail);case 8:case"end":return e.stop()}}),e)}))),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(p,{usermail:n}),Object(r.jsx)(m,{show:b,setshow:h,usermail:n}),Object(r.jsx)("div",{class:"m-4",children:"hello"}),Object(r.jsx)(y,{}),Object(r.jsx)("input",{name:"",id:"",class:"btn btn-primary",type:"button",onClick:function(){return h("block")},value:"New Ticket"})]})},k=(n(32),n(22)),S=n(2);var T=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h,{}),Object(r.jsxs)(k.a,{children:[Object(r.jsx)(S.a,{exact:!0,path:"/login",component:x}),Object(r.jsx)(S.a,{exact:!0,path:"/landingadmin",component:w})]})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.276ee04a.chunk.js.map